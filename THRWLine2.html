<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THRWLINE - Productos</title>
    <link rel="stylesheet" href="style2.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/b408879b64.js" crossorigin="anonymous"></script>
</head>
<body>

    <header>
        <div class="menu container">
            <img class="logo-1" src="imagenes/logo 1.png" alt="">
            <input type="checkbox" id="menu" />
            <label for="menu">
            <img class="logo-2" src="imagenes/menu.png" alt="">
            </label>
            <a href="index.html">
            <img class="logo-2" src="imagenes/logo 2.png" alt="">
            </a>
            <nav class="navbar">
                <div class="menu-1">
                    <ul>
                        <li><a href="THRWLine2.html">Lo mas nuevo</a></li>
                        <li><a href="#">Ofertas</a></li>
                        <li><a href="THRWLine2.html?categoria=Hombre">Hombre</a></li>
                        <li><a href="THRWLine2.html?categoria=Mujer">Mujer</a></li>

                    </ul>
                </div>
                    <div class="buscador container">
                        <input type="text" placeholder="Buscar...">
                        <button><i class="fa-solid fa-magnifying-glass"></i></button>
                    </div>
            
                <div class="menu-2">
                    <div class="Redirecciones">
                    <a href="THRWLine3.html">
                        <img src="imagenes/inciarsesion.png" alt="">
                    </a>
                    <a href="THRWLine4.html">
                     <img src="imagenes/bas.png" alt="">
                    </a>
                    </div>
                </div>

            </nav>
            </div>
    </header>
    <script>
        document.getElementById("searchBtn").addEventListener("click", () => {
            const texto = document.getElementById("searchInput").value.trim();

            if (texto !== "") {
                window.location.href = "THRWLine2.html?buscar=" + encodeURIComponent(texto);
            }
        });
    </script>

    
    <aside class="sidebar">
        <ul>
            <li><a href="THRWLine2.html?categoria=Playera">Playeras</a></li>
            <li><a href="THRWLine2.html?categoria=Sudadera">Sudaderas</a></li>
            <li><a href="THRWLine2.html?categoria=Chamarra">Chamarras</a></li>
            <li><a href="THRWLine2.html?categoria=Short">Shorts</a></li>
            <li><a href="THRWLine2.html?categoria=Top">Tops</a></li>
            <li><a href="THRWLine2.html">Ver Todo</a></li>
            
        </ul>       
    </aside>

    <main class="productos-grid">

        <div class="producto"
            data-categoria="hombre"
            data-tipo="playera"
            data-color="negro"
            data-estilo="deportivo"
            data-genero="hombre"
            data-tags="playera basquetbol deporte gym sport basica">

            <a href="producto.html?nombre=Playera%20basquetbol%20basica&precio=300&imagen=imagenes/prenda1.jpg">
                <img src="imagenes/prenda1.jpg" alt="Playera basquetbol basica">
                <p class="nombre">Playera de basquetbol basica</p>
                <p class="precio">$300</p>
            </a>
        </div>

        <div class="producto"
            data-categoria="hombre"
            data-tipo="short"
            data-color="blanco"
            data-estilo="deportivo"
            data-genero="hombre"
            data-tags="short deporte basico gym sport running">

            <a href="producto.html?nombre=Short%20basico&precio=300&imagen=imagenes/prenda2.jpg">
                <img src="imagenes/prenda2.jpg" alt="Short basico">
                <p class="nombre">Short basico</p>
                <p class="precio">$300</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="hombre"
            data-tipo="playera"
            data-color="negro"
            data-estilo="casual"
            data-genero="hombre"
            data-tags="playera basica hombre casual sencilla">

            <a href="producto.html?nombre=Playera%20basica&precio=150&imagen=imagenes/playera1.jpg">
                <img src="imagenes/playera1.jpg" alt="Playera basica">
                <p class="nombre">Playera basica</p>
                <p class="precio">$150</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="hombre"
            data-tipo="sudadera"
            data-color="gris"
            data-estilo="casual"
            data-genero="hombre"
            data-tags="sudadera basica abrigo hombre casual invierno">

            <a href="producto.html?nombre=Sudadera%20basica&precio=300&imagen=imagenes/sudadera1.jpg">
                <img src="imagenes/sudadera1.jpg" alt="Sudadera basica">
                <p class="nombre">Sudadera basica</p>
                <p class="precio">$300</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="hombre"
            data-tipo="sudadera"
            data-color="negro"
            data-estilo="premium"
            data-genero="hombre"
            data-tags="sudadera premium abrigo hombre alta calidad invierno">

            <a href="producto.html?nombre=Sudadera%20premium&precio=350&imagen=imagenes/sudadera2.jpg">
                <img src="imagenes/sudadera2.jpg" alt="Sudadera premium">
                <p class="nombre">Sudadera premium</p>
                <p class="precio">$350</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="mujer"
            data-tipo="sudadera"
            data-color="negro"
            data-estilo="casual"
            data-genero="mujer"
            data-tags="sudadera mujer basica casual abrigo invierno">

            <a href="producto.html?nombre=Sudadera%20basica%20Mujer&precio=300&imagen=imagenes/msudadera1.jpg">
                <img src="imagenes/msudadera1.jpg" alt="Sudadera basica mujer">
                <p class="nombre">Sudadera basica Mujer</p>
                <p class="precio">$300</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="hombre"
            data-tipo="playera"
            data-color="negro"
            data-estilo="casual"
            data-genero="hombre"
            data-tags="playera basica hombre casual simple">

            <a href="producto.html?nombre=camisa%20basica&precio=200&imagen=imagenes/producto1.jpg">
                <img src="imagenes/producto1.jpg" alt="camisa basica">
                <p class="nombre">Playera basica</p>
                <p class="precio">$200</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="mujer"
            data-tipo="top"
            data-color="amarillo"
            data-estilo="deportivo"
            data-genero="mujer"
            data-tags="top basico mujer gym deporte correr fitness">

            <a href="producto.html?nombre=top%20basico%20Mujer&precio=300&imagen=imagenes/top1.jpg">
                <img src="imagenes/top1.jpg" alt="Top basico Mujer">
                <p class="nombre">Top basico Mujer</p>
                <p class="precio">$300</p>
            </a>
        </div>

        <div class="producto"
            data-categoria="hombre"
            data-tipo="sudadera"
            data-color="rojo"
            data-estilo="casual"
            data-genero="hombre"
            data-tags="sudadera hombre basica casual abrigo">

            <a href="producto.html?nombre=Sudadera%20basica&precio=300&imagen=imagenes/producto2.jpg">
                <img src="imagenes/producto2.jpg" alt="Sudadera basica">
                <p class="nombre">Sudadera basica</p>
                <p class="precio">$300</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="hombre"
            data-tipo="chamarra"
            data-color="blanco"
            data-estilo="deportivo"
            data-genero="hombre"
            data-tags="chamarra rompe vientos sport deporte ligera abrigo">

            <a href="producto.html?nombre=Chamarra%20rompe%20Vientos&precio=350&imagen=imagenes/producto3.jpg">
                <img src="imagenes/producto3.jpg" alt="Chamarra rompe vientos">
                <p class="nombre">Chamarra rompe vientos</p>
                <p class="precio">$350</p>
            </a>
        </div>

        <div class="producto"
            data-categoria="mujer"
            data-tipo="chamarra"
            data-color="blanco"
            data-estilo="casual"
            data-genero="mujer"
            data-tags="chamarra mujer abrigo casual ligera moda">

            <a href="producto.html?nombre=Chamarra%20Mujer&precio=300&imagen=imagenes/producto4.jpg">
                <img src="imagenes/producto4.jpg" alt="Chamarra Mujer">
                <p class="nombre">Chamarra Mujer</p>
                <p class="precio">$300</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="hombre"
            data-tipo="playera"
            data-color="negro"
            data-estilo="deportivo"
            data-genero="hombre"
            data-tags="playera sin mangas gym deporte fitness running">

            <a href="producto.html?nombre=Playera%20sin%20mangas&precio=200&imagen=imagenes/producto5.jpg">
                <img src="imagenes/producto5.jpg" alt="Playera sin mangas">
                <p class="nombre">Playera sin mangas</p>
                <p class="precio">$200</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="mujer"
            data-tipo="top"
            data-color="gris"
            data-estilo="deportivo"
            data-genero="mujer"
            data-tags="top mujer gym fitness entrenamiento running">

            <a href="producto.html?nombre=Top%20Mujer&precio=300&imagen=imagenes/producto6.jpg">
                <img src="imagenes/producto6.jpg" alt="Top mujer">
                <p class="nombre">Top mujer</p>
                <p class="precio">$300</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="hombre"
            data-tipo="playera"
            data-color="blanco"
            data-estilo="casual"
            data-genero="hombre"
            data-tags="playera hombre camiseta basica casual ropa">

            <a href="producto.html?nombre=Playera&precio=350&imagen=imagenes/producto7.jpg">
                <img src="imagenes/producto7.jpg" alt="Playera">
                <p class="nombre">Playera</p>
                <p class="precio">$350</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="mujer"
            data-tipo="chamarra"
            data-color="negro"
            data-estilo="casual"
            data-genero="mujer"
            data-tags="chamarra mujer abrigo casual ligera ropa">

            <a href="producto.html?nombre=Chamarra%20Mujer&precio=300&imagen=imagenes/producto8.jpg">
                <img src="imagenes/producto8.jpg" alt="Chamarra Mujer">
                <p class="nombre">Chamarra Mujer</p>
                <p class="precio">$300</p>
            </a>
        </div>


        <div class="producto"
            data-categoria="mujer"
            data-tipo="sudadera"
            data-color="blanco"
            data-estilo="casual"
            data-genero="mujer"
            data-tags="sudadera mujer abrigo casual invierno ropa">

            <a href="producto.html?nombre=Sudadera%20Mujer&precio=300&imagen=imagenes/producto9.jpg">
                <img src="imagenes/producto9.jpg" alt="Sudadera Mujer">
                <p class="nombre">Sudadera Mujer</p>
                <p class="precio">$300</p>
            </a>
        </div>

    </main>

    <footer class="footer">
        <a onclick="mostrarAlerta('En Thrwline, sabemos que tú eres lo más importante. Por eso, diseñamos nuestra tienda online pensando en ti')">Acerca de nosotros</a>
        <a onclick="mostrarAlerta('Términos de uso: Los datos personales de cada usuario serán protegidos mediante cookies')">Términos de uso</a>
        <a href="https://mail.google.com/mail/?view=cm&fs=1&to=thrwline@gmail.com&su=Consulta%20sobre%20THRWLINE&body=Hola%2C%20quisiera%20más%20información%20sobre%20sus%20servicios."
        target="_blank" title="Enviar correo por Gmail">Contacto</a>
        <a href="https://wa.me/522462431474?text=Hola%2C%20quiero%20más%20información%20sobre%20THRWLINE"
        target="_blank" title="Enviar mensaje por WhatsApp">WhatsApp: +52 246 243 1474</a>
        <a href="https://www.instagram.com/trhwline?igsh=MXFtMzZtZWl3a3N6bg==" target="_blank">
        <img src="imagenes/insta2.png" alt="Instagram THRWLINE">
        </a>
    </footer>

        <script>
            const params = new URLSearchParams(window.location.search);

            let categoria = params.get("categoria"); 
            let buscar = params.get("buscar");  

            // Normalizar texto (acentos, plural, espacios)
            function normalizar(texto) {
                return texto
                    .toLowerCase()
                    .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
                    .replace(/s$/, "")
                    .trim();
            }

            // ---------------- SINONIMOS ----------------
            const sinonimos = {
                playera: ["camisa", "camiseta"],
                chamarra: ["abrigo", "jacket"],
                sudadera: ["hoodie"],
                top: ["blusa"],
                short: ["pantalon corto"]
            };

            function expandirSinonimos(palabra) {
                if (sinonimos[palabra]) {
                    return [palabra, ...sinonimos[palabra]];
                }
                return [palabra];
            }

            // ---------------- BUSQUEDA CON ERRORES (LEVENSHTEIN) ----------------
            function distancia(a, b) {
                const dp = Array.from({ length: a.length + 1 }, (_, i) =>
                    Array.from({ length: b.length + 1 }, (_, j) =>
                        i === 0 ? j : j === 0 ? i : 0
                    )
                );

                for (let i = 1; i <= a.length; i++) {
                    for (let j = 1; j <= b.length; j++) {
                        dp[i][j] = Math.min(
                            dp[i - 1][j] + 1,
                            dp[i][j - 1] + 1,
                            dp[i - 1][j - 1] + (a[i - 1] === b[j - 1] ? 0 : 1)
                        );
                    }
                }
                return dp[a.length][b.length];
            }

            function esParecido(a, b) {
                return distancia(a, b) <= 2; // tolera hasta 2 errores
            }

            // ---------------- PARSEO ----------------
            const filtroCategoria = categoria ? normalizar(categoria) : null;

            let palabrasBusqueda = [];
            if (buscar) {
                palabrasBusqueda = buscar
                    .split(" ")
                    .map(p => normalizar(p))
                    .filter(p => p.length > 0)
                    .flatMap(expandirSinonimos); // ← incluye sinónimos
            }

            // ---------------- FILTRO ----------------
            let productosEncontrados = 0;

            document.querySelectorAll(".producto").forEach(producto => {

                const categoriaP = normalizar(producto.dataset.categoria || "");
                const tipoP = normalizar(producto.dataset.tipo || "");
                const generoP = normalizar(producto.dataset.genero || "");
                const colorP = normalizar(producto.dataset.color || "");
                const estiloP = normalizar(producto.dataset.estilo || "");

                const nombreP = normalizar(producto.querySelector(".nombre").textContent || "");
                const tagsP = normalizar(producto.dataset.tags || "");

                let puntaje = 0;

                // FILTRO POR CATEGORIA EXACTA
                if (filtroCategoria) {
                    if (
                        categoriaP.includes(filtroCategoria) ||
                        tipoP.includes(filtroCategoria) ||
                        nombreP.includes(filtroCategoria)
                    ) {
                        puntaje += 5;
                    } else {
                        producto.style.display = "none";
                        return;
                    }
                }

                // ---------------- BUSQUEDA MULTIPLE MEJORADA ----------------
                for (let palabra of palabrasBusqueda) {

                    // Coincidencia exacta
                    if (
                        nombreP.includes(palabra) ||
                        categoriaP.includes(palabra) ||
                        tipoP.includes(palabra) ||
                        generoP.includes(palabra) ||
                        colorP.includes(palabra) ||
                        estiloP.includes(palabra) ||
                        tagsP.includes(palabra)
                    ) {
                        puntaje += 3;
                    }

                    // Coincidencia por error ortografico
                    if (
                        esParecido(palabra, nombreP) ||
                        esParecido(palabra, tipoP) ||
                        esParecido(palabra, categoriaP)
                    ) {
                        puntaje += 2;
                    }
                }

                // Si no hay busqueda, mostrar todo
                if (palabrasBusqueda.length === 0 && !filtroCategoria) {
                    puntaje = 1;
                }

                producto.dataset.puntaje = puntaje;

                if (puntaje > 0) {
                    producto.style.display = "";
                    productosEncontrados++;
                } else {
                    producto.style.display = "none";
                }
            });

            // ---------------- ORDENAR POR RELEVANCIA ----------------
            const contenedor = document.querySelector(".productos-grid");
            const productosOrdenados = [...document.querySelectorAll(".producto")].sort(
                (a, b) => (b.dataset.puntaje || 0) - (a.dataset.puntaje || 0)
            );
            productosOrdenados.forEach(p => contenedor.appendChild(p));

            // ---------------- MENSAJE SI NO SE ENCUENTRA NADA ----------------
            if (productosEncontrados === 0) {
                const msg = document.createElement("div");
                msg.style.textAlign = "center";
                msg.style.padding = "20px";
                msg.innerHTML = `
                    <h2>No se encontraron productos</h2>
                    <a href="THRWLine2.html" style="
                        padding: 10px 20px;
                        background:black;
                        color:white;
                        border-radius:8px;
                        display:inline-block;
                        margin-top:10px;
                    ">Ver todo</a>
                `;
                contenedor.innerHTML = "";
                contenedor.appendChild(msg);
            }
        </script>



</body>
</html>